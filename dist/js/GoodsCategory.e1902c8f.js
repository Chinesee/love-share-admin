(window.webpackJsonp=window.webpackJsonp||[]).push([["GoodsCategory"],{"3b80":function(e,t,a){"use strict";a.r(t);var o=a("1da1"),r=a("4c43"),s={name:"GoodsCategory",data:()=>({showPopover:!1,categoryName:"",onActive:[],leftCheck:[]}),computed:{categoryList(){return this.$store.state.categoryList},showAlert(){return this.categoryList.some(e=>e.name===this.categoryName)},disabled(){return this.leftCheck.length<=0}},watch:{categoryList:{handler(e){this.onActive=e.filter(e=>e.activation).map(e=>e._id)},immediate:!0}},methods:{addCategory(){var e=this;return Object(o.a)(function*(){if(e.categoryName.length>0){2e3===(yield Object(r.a)({category_name:e.categoryName})).code&&(e.categoryName="",e.showPopover=!1,e.$store.dispatch("getCategoryList"))}})()},deleteCategory(){var e=this;return Object(o.a)(function*(){try{yield Object(r.b)({category_id_list:e.leftCheck}),e.$store.dispatch("getCategoryList")}finally{e.leftCheck=[]}})()},leftCheckChange(e){this.leftCheck=e},activeChange(e,t,a){var s=this;return Object(o.a)(function*(){try{"right"===t?yield Object(r.d)({category_id_list:a,activation:!0}):"left"===t&&(yield Object(r.d)({category_id_list:a,activation:!1}))}finally{s.$store.dispatch("getCategoryList")}})()}}},c=a("2877"),i=Object(c.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pt-8"},[a("el-transfer",{attrs:{data:e.categoryList,titles:["可用分类","已上架分类"],props:{key:"_id",label:"name"}},on:{"left-check-change":e.leftCheckChange,change:e.activeChange},model:{value:e.onActive,callback:function(t){e.onActive=t},expression:"onActive"}},[a("div",{staticClass:"h-full flex-row-center",attrs:{slot:"left-footer"},slot:"left-footer"},[a("vs-button",{staticClass:"mr-2",attrs:{slot:"reference",color:"danger",size:"small",disabled:e.disabled},on:{click:function(t){return e.deleteCategory()}},slot:"reference"},[e._v("删除选中分类")]),a("el-popover",{attrs:{width:"250",trigger:"manual"},model:{value:e.showPopover,callback:function(t){e.showPopover=t},expression:"showPopover"}},[a("div",[a("vs-input",{staticClass:"w-full mb-2",attrs:{"label-placeholder":"分类名称"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCategory()}},model:{value:e.categoryName,callback:function(t){e.categoryName=t},expression:"categoryName"}}),a("vs-alert",{attrs:{color:"danger",active:e.showAlert}},[e._v("已存在分类，请勿重复添加")]),a("div",{staticClass:"flex justify-end"},[a("vs-button",{staticClass:"danger text-lg",attrs:{type:"flat",color:"danger",icon:"close"},on:{click:function(t){e.showPopover=!1}}}),a("vs-button",{staticClass:"text-lg",attrs:{type:"flat",icon:"done"},on:{click:function(t){return e.addCategory()}}})],1)],1),a("vs-button",{attrs:{slot:"reference",size:"small"},on:{click:function(t){e.showPopover=!e.showPopover}},slot:"reference"},[e._v("添加分类")])],1)],1)])],1)},[],!1,null,"825b50b6",null);t.default=i.exports}}]);