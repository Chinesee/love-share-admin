(window.webpackJsonp=window.webpackJsonp||[]).push([["GoodsCategory"],{"3b80":function(e,t,r){"use strict";r.r(t);r("96cf");var n=r("3b8d"),a=(r("7f7f"),r("4c43")),o={name:"GoodsCategory",data:function(){return{showPopover:!1,categoryName:"",onActive:[],leftCheck:[]}},computed:{categoryList:function(){return this.$store.state.categoryList},showAlert:function(){var e=this;return this.categoryList.some(function(t){return t.name===e.categoryName})},disabled:function(){return this.leftCheck.length<=0}},watch:{categoryList:{handler:function(e){this.onActive=e.filter(function(e){return e.activation}).map(function(e){return e._id})},immediate:!0}},methods:{addCategory:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.categoryName.length>0)){e.next=6;break}return e.next=3,Object(a.a)({category_name:this.categoryName});case 3:t=e.sent,2e3===t.code&&(this.categoryName="",this.showPopover=!1,this.$store.dispatch("getCategoryList"));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),deleteCategory:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(a.b)({category_id_list:this.leftCheck});case 3:this.$store.dispatch("getCategoryList");case 4:return e.prev=4,this.leftCheck=[],e.finish(4);case 7:case"end":return e.stop()}},e,this,[[0,,4,7]])}));return function(){return e.apply(this,arguments)}}(),leftCheckChange:function(e){this.leftCheck=e},activeChange:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"right"!==r){e.next=6;break}return e.next=4,Object(a.d)({category_id_list:n,activation:!0});case 4:e.next=9;break;case 6:if("left"!==r){e.next=9;break}return e.next=9,Object(a.d)({category_id_list:n,activation:!1});case 9:return e.prev=9,this.$store.dispatch("getCategoryList"),e.finish(9);case 12:case"end":return e.stop()}},e,this,[[0,,9,12]])}));return function(t,r,n){return e.apply(this,arguments)}}()}},s=r("2877"),c=Object(s.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pt-8"},[r("el-transfer",{attrs:{data:e.categoryList,titles:["可用分类","已上架分类"],props:{key:"_id",label:"name"}},on:{"left-check-change":e.leftCheckChange,change:e.activeChange},model:{value:e.onActive,callback:function(t){e.onActive=t},expression:"onActive"}},[r("div",{staticClass:"h-full flex-row-center",attrs:{slot:"left-footer"},slot:"left-footer"},[r("vs-button",{staticClass:"mr-2",attrs:{slot:"reference",color:"danger",size:"small",disabled:e.disabled},on:{click:function(t){return e.deleteCategory()}},slot:"reference"},[e._v("删除选中分类")]),r("el-popover",{attrs:{width:"250",trigger:"manual"},model:{value:e.showPopover,callback:function(t){e.showPopover=t},expression:"showPopover"}},[r("div",[r("vs-input",{staticClass:"w-full mb-2",attrs:{"label-placeholder":"分类名称"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCategory()}},model:{value:e.categoryName,callback:function(t){e.categoryName=t},expression:"categoryName"}}),r("vs-alert",{attrs:{color:"danger",active:e.showAlert}},[e._v("已存在分类，请勿重复添加")]),r("div",{staticClass:"flex justify-end"},[r("vs-button",{staticClass:"danger text-lg",attrs:{type:"flat",color:"danger",icon:"close"},on:{click:function(t){e.showPopover=!1}}}),r("vs-button",{staticClass:"text-lg",attrs:{type:"flat",icon:"done"},on:{click:function(t){return e.addCategory()}}})],1)],1),r("vs-button",{attrs:{slot:"reference",size:"small"},on:{click:function(t){e.showPopover=!e.showPopover}},slot:"reference"},[e._v("添加分类")])],1)],1)])],1)},[],!1,null,"825b50b6",null);t.default=c.exports}}]);