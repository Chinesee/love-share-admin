(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-febd64b4"],{"577c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("vs-tabs",{staticClass:"p-6 bg-primary vs-con-loading__container",attrs:{id:"main"}},[i("vs-tab",{staticClass:"px-4 py-10",attrs:{icon:"el-icon-user","icon-pack":"el-icon",label:"账号信息"}},[i("div",{staticClass:"mb-8 flex"},[i("div",{staticClass:"mr-16"},[i("EditAvatar",{ref:"editAvatar",attrs:{"admin-id":t.detail._id,avatar:t.detail.avatar_url,gender:t.detail.gender},on:{updateInfo:function(e){return t.getAdminDetail()}}})],1),i("div",{staticClass:"w-1/3"},[i("EditForm",{ref:"editForm",attrs:{"form-data":t.info}})],1)]),i("div",{staticClass:"mb-5 p-5 rounded-lg border-primary",staticStyle:{"border-width":"1px","border-style":"solid"}},[i("p",{staticClass:"text-lg text-semi"},[t._v("权 限")]),i("vs-divider"),i("EditPermission",{ref:"editPermissions",attrs:{permissions:t.detail.permissions,editable:!0}})],1),i("div",{staticClass:"flex"},[i("vs-button",{staticClass:"save ml-auto",on:{click:function(e){return t.onUpdateAmin()}}},[t._v("保存设置")])],1)]),i("vs-tab",{staticClass:"px-4 py-10",attrs:{icon:"el-icon-key","icon-pack":"el-icon",label:"安全设置"}},[i("div",[i("EditPassword")],1)])],1)],1)},n=[],s=(i("96cf"),i("3b8d")),r=i("b0e1"),d=i("3bda"),c=i("bb2a"),o=i("4411"),l=i("518e"),m={name:"AdminEdit",components:{EditAvatar:r["a"],EditForm:d["a"],EditPassword:c["a"],EditPermission:o["a"]},data:function(){return{info:{},detail:{}}},created:function(){this.getAdminDetail()},methods:{getAdminDetail:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["d"])({admin_id:this.$route.query.adminId});case 2:e=t.sent,i=e.code,a=e.data.admin_detail,2e3===i&&(this.detail=a,this.info={_id:a._id,nickname:a.nickname,real_name:a.real_name,email:a.email});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onUpdateAmin:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,i,a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$refs.editForm.submit()){t.next=24;break}return this.$vs.loading({container:"#main",scale:1}),e=Object.assign({admin_id:this.info._id,gender:this.$refs.editAvatar.selectedGender,permissions:this.$refs.editPermissions.getPermissions()},this.$refs.editForm.form),t.prev=3,t.next=6,Object(l["l"])(e);case 6:if(i=t.sent,a=i.code,n=i.msg,2e3!==a){t.next=15;break}return t.next=12,this.getAdminDetail();case 12:this.$vs.notify({title:"信息更新成功",text:n,color:"success"}),t.next=16;break;case 15:throw new Error(n);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](3),this.$vs.notify({title:"信息更新失败",text:t.t0,color:"danger"});case 21:return t.prev=21,this.$vs.loading.close("#main > .con-vs-loading"),t.finish(21);case 24:case"end":return t.stop()}},t,this,[[3,18,21,24]])}));function e(){return t.apply(this,arguments)}return e}()}},u=m,f=(i("c6c6"),i("2877")),v=Object(f["a"])(u,a,n,!1,null,"d94f91b4",null);e["default"]=v.exports},c6c6:function(t,e,i){"use strict";var a=i("e5de"),n=i.n(a);n.a},e5de:function(t,e,i){}}]);
//# sourceMappingURL=chunk-febd64b4.46bfeae1.js.map