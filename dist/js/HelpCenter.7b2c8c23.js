(window.webpackJsonp=window.webpackJsonp||[]).push([["HelpCenter"],{"47ed":function(t,e,i){"use strict";var a=i("b1b2");i.n(a).a},"558b":function(t,e,i){"use strict";i.r(e);var a=i("1da1"),s=i("5873"),l=i("9d63"),n=i.n(l),c=i("284b");var r={name:"HelpCenter",components:{VueEditor:s.a,VuePerfectScrollbar:n.a},data:()=>({guideList:[],article:{},payload:{section:"",articles:[{title:"",content:""}]},visible1:!1,visible2:!1,showEditor:!1,editData:{title:"",content:""},title:"",content:""}),watch:{visible1(t){t||(this.payload={section:"",articles:[{title:"",content:""}]})}},created(){this.getGuideList()},methods:{getGuideList(){var t=this;return Object(a.a)(function*(){const e=yield Object(c.a)({url:"/guide/list",method:"get"}),i=e.code,a=e.data;if(2e3===i){t.guideList=a.guide_list;const e=t.guideList.find(t=>{var e;return(null===(e=t.articles)||void 0===e?void 0:e.length)>0}),i=e._id,s=e.articles;t.getArticle(i,s[0]._id)}})()},createGuide(){var t=this;return Object(a.a)(function*(){const e=t.payload,i=e.section,a=e.articles;if(i.length>0&&a[0].title.length>0){const e=t.guideList.filter(t=>t.section===i);e.length>0?yield(s={section_id:e[0]._id,title:a[0].title},Object(c.a)({url:"/guide/article/add",method:"post",data:s})):yield function(t){return Object(c.a)({url:"/guide/create",method:"post",data:t})}(t.payload),t.getGuideList(),t.visible1=!1}var s})()},deleteGuide(t){var e=this;return Object(a.a)(function*(){var i;2e3===(yield(i={section_id:t},Object(c.a)({url:"/guide/delete",method:"delete",data:i}))).code&&e.getGuideList()})()},getArticle(t,e){var i=this;this.$loading(Object(a.a)(function*(){i.showEditor=!1;const a=yield(n={section_id:t,article_id:e},Object(c.a)({url:"/guide/article/content",method:"get",params:n})),s=a.code,l=a.data;var n;2e3===s&&(i.article=l.article)}),{container:".article-container",scale:1})},onEditArticle(){this.showEditor=!0,this.editData=JSON.parse(JSON.stringify(this.article))},onUpdateArticle(){var t=this;return Object(a.a)(function*(){if(t.editData.content.length>0){2e3===(yield(e=t.editData,Object(c.a)({url:"/guide/article/update",method:"put",data:e}))).code&&(yield t.getGuideList(),t.showEditor=!1)}var e})()},onDeleteArticle(){var t=this;return Object(a.a)(function*(){var e;2e3===(yield(e={article_id:t.article._id},Object(c.a)({url:"/guide/article/delete",method:"delete",data:e}))).code&&(t.getGuideList(),t.visible2=!1)})()}}},o=(i("47ed"),i("2877")),d=Object(o.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mt-4 flex items-start"},[i("div",{staticClass:"w-1/5"},[i("VuePerfectScrollbar",{staticClass:"scroll-area",staticStyle:{height:"550px","border-radius":"0.8rem"},attrs:{settings:{maxScrollbarLength:160,wheelSpeed:.6}}},[i("vs-collapse",{staticClass:"section"},t._l(t.guideList,function(e,a){return i("vs-collapse-item",{key:a,attrs:{open:""}},[i("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n            "+t._s(e.section)+"\n            "),i("el-dropdown",[i("i",{staticClass:"el-icon-more ml-1 text-xs text-gray"}),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(i){t.visible1=!0,t.payload.section=e.section,t.createGuide()}}},[t._v("\n                  添加文章\n                ")]),i("el-dropdown-item",[t._v("\n                  编辑栏目\n                ")]),e.articles.length<=0?i("el-dropdown-item",{staticClass:"danger",attrs:{divider:""},nativeOn:{click:function(i){return t.deleteGuide(e._id)}}},[t._v("\n                  删除栏目\n                ")]):t._e()],1)],1)],1),i("ul",{staticClass:"ml-2 text-semi"},t._l(e.articles,function(a,s){return i("li",{key:s,staticClass:"mb-2",on:{click:function(i){return t.getArticle(e._id,a._id)}}},[t._v("\n              "+t._s(a.title)+"\n            ")])}),0)])}),1)],1),i("div",[i("el-popover",{attrs:{placement:"top",trigger:"manual"},model:{value:t.visible1,callback:function(e){t.visible1=e},expression:"visible1"}},[i("div",[i("div",{staticClass:"mb-2 flex justify-end"},[i("i",{staticClass:"el-icon-close text-lg cursor-pointer",on:{click:function(e){t.visible1=!1}}})]),i("vs-input",{staticClass:"mb-4",attrs:{placeholder:"栏目名称"},model:{value:t.payload.section,callback:function(e){t.$set(t.payload,"section",e)},expression:"payload.section"}}),i("vs-input",{attrs:{placeholder:"文章标题"},model:{value:t.payload.articles[0].title,callback:function(e){t.$set(t.payload.articles[0],"title",e)},expression:"payload.articles[0].title"}}),i("vs-button",{staticClass:"mt-4 mb-3 w-full radius",on:{click:function(e){return t.createGuide()}}},[t._v("添加")])],1),i("div",{staticClass:"mt-5 w-full flex justify-center",attrs:{slot:"reference"},slot:"reference"},[i("div",{staticClass:"py-1 px-2 flex-row-center bg-primary radius text-white cursor-pointer",staticStyle:{width:"11rem","font-size":"0.9rem"},on:{click:function(e){t.visible1=!0}}},[i("div",{staticClass:"flex-1 text-center"},[t._v("\n              添加栏目\n            ")]),i("div",{staticClass:"ml-auto w-8 h-8 flex-row-center rounded-lg",staticStyle:{background:"rgba(121, 131, 255)"}},[i("feather",{attrs:{size:"20",type:"plus"}})],1)])])])],1)],1),i("div",{staticClass:"w-4/5 pl-6",staticStyle:{height:"550px"}},[i("div",{staticClass:"article-container h-full p-4 bg-gray rounded-lg vs-con-loading__container"},[i("div",{staticClass:"flex items-center justify-between"},[t.showEditor?i("div",[i("vs-input",{attrs:{label:"标题"},model:{value:t.editData.title,callback:function(e){t.$set(t.editData,"title",e)},expression:"editData.title"}})],1):i("div",[i("div",{staticClass:"text-semi text-xl font-bold"},[t._v(t._s(t.article.title))]),i("p",{staticClass:"text-gray text-xs"},[t._v("\n            最后更新于 "+t._s(t.$dayjs(t.article.updated_at).format("YYYY年M月DD日 HH:mm:ss"))+"\n          ")])]),t.showEditor?i("div",[i("vs-button",{on:{click:function(e){return t.onUpdateArticle()}}},[t._v("完成编辑")]),i("span",{staticClass:"ml-2 danger text-sm cursor-pointer",on:{click:function(e){t.showEditor=!1}}},[t._v("\n            取消\n          ")])],1):i("div",[i("vs-button",{staticClass:"text-sm",on:{click:function(e){return t.onEditArticle()}}},[t._v("编辑")]),i("el-popover",{attrs:{placement:"bottom",trigger:"click"},model:{value:t.visible2,callback:function(e){t.visible2=e},expression:"visible2"}},[i("p",{staticClass:"text-center"},[t._v("删除后将无法恢复")]),i("div",{staticClass:"text-center"},[i("vs-button",{attrs:{size:"small",type:"flat",color:"danger"},on:{click:function(e){return t.onDeleteArticle()}}},[t._v("确认删除")])],1),i("span",{staticClass:"ml-2 danger text-sm cursor-pointer",attrs:{slot:"reference"},slot:"reference"},[t._v("删除")])])],1)]),i("vs-divider"),i("VuePerfectScrollbar",{staticStyle:{height:"420px"},attrs:{settings:{maxScrollbarLength:160,wheelSpeed:.6}}},[!t.article.content&&!t.showEditor||t.article.content.length<=0&&!t.showEditor?i("div",{staticClass:"h-full flex flex-col justify-center items-center text-gray-400"},[i("i",{staticClass:"el-icon-warning-outline text-4xl"}),i("p",{staticClass:"mt-2 text-sm"},[t._v("未添加内容")])]):t._e(),t.showEditor?i("div",[i("vue-editor",{model:{value:t.editData.content,callback:function(e){t.$set(t.editData,"content",e)},expression:"editData.content"}})],1):i("div",{staticClass:"text-semi",domProps:{innerHTML:t._s(t.article.content)}})])],1)])])},[],!1,null,"85846766",null);e.default=d.exports},b1b2:function(t,e,i){}}]);