{"version":3,"sources":["webpack:///./src/views/admin/AdminCreate.vue?cbee","webpack:///src/views/admin/AdminCreate.vue","webpack:///./src/views/admin/AdminCreate.vue?99b8","webpack:///./src/views/admin/AdminCreate.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","ref","_v","model","value","callback","$$v","allSelected","expression","slot","all-selected","editable","on","click","$event","onCreate","staticRenderFns","AdminCreatevue_type_script_lang_js_","name","components","EditAvatar","EditForm","EditPassword","EditPermission","data","methods","_onCreate","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_this$$refs","editAvatar","editForm","editPassword","editPermissions","permissions","payload","_ref","code","wrap","_context","prev","next","$refs","submit","$vs","loading","container","scale","getPermissions","assign","form","avatar_url","avatarUrl","gender","selectedGender","admin","sent","$router","push","notify","time","title","text","color","t0","close","finish","stop","apply","arguments","admin_AdminCreatevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d0e920b.6de9ccdd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mt-6 p-6 base-shadow bg-semi radius vs-con-loading__container\",attrs:{\"id\":\"main\"}},[_c('div',{staticClass:\"mb-6 flex items-center\"},[_c('div',{staticClass:\"pr-10 flex flex-col items-center justify-center\"},[_c('EditAvatar',{ref:\"editAvatar\"})],1),_c('div',{staticClass:\"flex-1\"},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"w-1/2 pr-4\"},[_c('EditForm',{ref:\"editForm\"})],1),_c('div',{staticClass:\"w-1/2 pl-4\"},[_c('EditPassword',{ref:\"editPassword\"})],1)])])]),_c('div',{staticClass:\"mb-5 p-5 radius\"},[_c('div',{staticClass:\"flex items-center justify-between\"},[_c('p',{staticClass:\"text-lg text-semi\"},[_vm._v(\"权 限\")]),_c('div',[_c('vs-switch',{model:{value:(_vm.allSelected),callback:function ($$v) {_vm.allSelected=$$v},expression:\"allSelected\"}},[_c('span',{attrs:{\"slot\":\"on\"},slot:\"on\"},[_vm._v(\"全选\")]),_c('span',{attrs:{\"slot\":\"off\"},slot:\"off\"},[_vm._v(\"全选\")])])],1)]),_c('vs-divider'),_c('EditPermission',{ref:\"editPermissions\",attrs:{\"all-selected\":_vm.allSelected,\"editable\":true}})],1),_c('div',{staticClass:\"flex justify-end\"},[_c('vs-button',{on:{\"click\":function($event){return _vm.onCreate()}}},[_vm._v(\"信息无误，确认创建\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    id=\"main\"\n    class=\"mt-6 p-6 base-shadow bg-semi radius vs-con-loading__container\"\n  >\n    <div class=\"mb-6 flex items-center\">\n      <!-- 头像 -->\n      <div class=\"pr-10 flex flex-col items-center justify-center\">\n        <EditAvatar ref=\"editAvatar\" />\n      </div>\n      <!-- 表单 -->\n      <div class=\"flex-1\">\n        <div class=\"flex\">\n          <div class=\"w-1/2 pr-4\">\n            <EditForm ref=\"editForm\" />\n          </div>\n          <div class=\"w-1/2 pl-4\">\n            <EditPassword ref=\"editPassword\" />\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 权限 -->\n    <div class=\"mb-5 p-5 radius\">\n      <div class=\"flex items-center justify-between\">\n        <p class=\"text-lg text-semi\">权 限</p>\n        <div>\n          <vs-switch v-model=\"allSelected\">\n            <span slot=\"on\">全选</span>\n            <span slot=\"off\">全选</span>\n          </vs-switch>\n        </div>\n      </div>\n      <vs-divider />\n      <EditPermission\n        ref=\"editPermissions\"\n        :all-selected=\"allSelected\"\n        :editable=\"true\"\n      />\n    </div>\n\n    <div class=\"flex justify-end\">\n      <vs-button @click=\"onCreate()\">信息无误，确认创建</vs-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport EditAvatar from './edit/EditAvatar.vue'\nimport EditForm from './edit/EditForm.vue'\nimport EditPassword from './edit/EditPassword.vue'\nimport EditPermission from './edit/EditPermission.vue'\n\nimport { createAdmin } from '@/request/api/admin'\n\nexport default {\n  name: 'AdminCreate',\n  components: {\n    EditAvatar, EditForm, EditPassword, EditPermission,\n  },\n\n  data: () => ({\n    allSelected: false,\n  }),\n\n  methods: {\n    async onCreate() {\n      const {\n        editAvatar, editForm, editPassword, editPermissions,\n      } = this.$refs\n\n      if (editForm.submit() && editPassword.submit()) {\n        this.$vs.loading({\n          container: '#main',\n          scale: 1,\n        })\n\n        const permissions = editPermissions.getPermissions()\n        // 数据载体\n        const payload = Object.assign(\n          editForm.form,\n          editPassword.form,\n          { avatar_url: editAvatar.avatarUrl },\n          { gender: editAvatar.selectedGender },\n          { permissions },\n        )\n        try {\n          const { code } = await createAdmin(payload)\n          if (code === 2000) {\n            this.$router.push('/admin-list')\n          } else if (code === 4002) {\n            this.$vs.notify({\n              time: 3000,\n              title: '创建失败',\n              text: '昵称已存在，请重新填写',\n              color: 'warning',\n            })\n          } else if (code === 4003) {\n            this.$vs.notify({\n              time: 3000,\n              title: '创建失败',\n              text: '账号已存在，请直接登录',\n              color: 'warning',\n            })\n          }\n        } catch (err) {\n          this.$vs.notify({\n            time: 3000,\n            title: '创建失败',\n            text: err,\n            color: 'danger',\n          })\n        } finally {\n          this.$vs.loading.close('#main > .con-vs-loading')\n        }\n      }\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminCreate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminCreate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminCreate.vue?vue&type=template&id=4677a18e&\"\nimport script from \"./AdminCreate.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminCreate.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}