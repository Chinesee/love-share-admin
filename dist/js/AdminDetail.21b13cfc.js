(window.webpackJsonp=window.webpackJsonp||[]).push([["AdminDetail"],{4411:function(t,e,s){"use strict";s("ac6a");var i={name:"EditPermission",props:{editable:{type:Boolean,default:!1},allSelected:Boolean,permissions:Array},data:()=>({per:[],modules:{user:"用户",goods:"商品",order:"订单",comment:"留言",guide:"指引",admin:"管理员"},actions:["read","write","create","delete"]}),watch:{permissions:{handler(t){t?this.setPermissions():this.initValues()},immediate:!0},allSelected(t){this.setAllCheckboxStatus(t)}},methods:{initValues(){const t=[{read:!1},{write:!1},{create:!1},{delete:!1}];this.per=Object.keys(this.modules).map(e=>({module:e,purview:this.$cloneDeepWith(t)}))},setPermissions(){const t=this.$cloneDeepWith(this.permissions);this.per=Object.keys(this.modules).map(e=>{for(const s of t)if(s.module===e)return{module:e,purview:this.actions.map(t=>{const e={};return e[`${t}`]=s.purview.includes(t),e})};return{module:e,purview:[{read:!1},{write:!1},{create:!1},{delete:!1}]}})},setAllCheckboxStatus(t){this.per.forEach(e=>{e.purview.forEach((e,s)=>{e[this.actions[s]]=t})})},getPermissions(){return this.per.map(t=>({module:t.module,purview:t.purview.filter((t,e)=>t[this.actions[e]]).map(t=>Object.keys(t)[0])}))}}},a=(s("9e95"),s("2877")),r=Object(a.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.per?s("table",{staticClass:"permission"},[t._m(0),t._l(t.per,function(e,i){return s("tr",{key:i},[s("td",[t._v(t._s(t.modules[e.module]))]),t._l(e.purview,function(e,i){return s("td",{key:i},[s("vs-checkbox",{class:{"pointer-events-none":!t.editable},attrs:{disabled:!t.editable},model:{value:e[t.actions[i]],callback:function(s){t.$set(e,t.actions[i],s)},expression:"td[actions[j]]"}})],1)})],2)})],2):t._e()])},[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("Module")]),e("th",[this._v("Read")]),e("th",[this._v("Write")]),e("th",[this._v("Create")]),e("th",[this._v("Delete")])])}],!1,null,"19adfc7a",null);e.a=r.exports},6003:function(t,e,s){"use strict";var i=s("66ba");s.n(i).a},"66ba":function(t,e,s){},"76bb":function(t,e,s){"use strict";s.r(e);var i=s("1da1"),a=s("4411"),r=s("518e"),d={name:"AdminDetail",components:{EditPermission:a.a},data:()=>({detail:{}}),mounted(){this.getAdminDetail(this.$route.query.adminId||this.$store.getters["admin/adminId"])},methods:{getAdminDetail(t){var e=this;return Object(i.a)(function*(){const s=yield Object(r.d)({admin_id:t}),i=s.code,a=s.data;2e3===i&&(e.detail=a.admin_detail)})()},editAdmin(){this.$router.push({path:"/admin-edit",query:{adminId:this.detail._id}})}}},n=(s("6003"),s("2877")),l=Object(n.a)(d,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"info mb-6 p-5 light-shadow bg-semi rounded-lg"},[s("p",{staticClass:"mb-4 text-lg text-semi"},[t._v("账 号")]),s("div",{staticClass:"mb-4 flex"},[s("img",{staticClass:"mr-8 base-shadow rounded-lg",attrs:{width:"100px",alt:"avatar",src:t.detail.avatar_url}}),s("div",{staticClass:"w-full flex"},[s("div",{staticClass:"flex-1"},[s("table",[s("tr",[s("td",{staticClass:"text-semi"},[t._v("管理员账号")]),s("td",{staticClass:"text-gray"},[t._v(t._s(t.detail.account))])]),s("tr",[s("td",{staticClass:"text-semi"},[t._v("昵 称")]),s("td",{staticClass:"text-gray"},[t._v(t._s(t.detail.nickname))])]),s("tr",[s("td",{staticClass:"text-semi"},[t._v("真实姓名")]),s("td",{staticClass:"text-gray"},[t._v(t._s(t.detail.real_name||"未填写"))])])])]),s("div",{staticClass:"flex-1"},[s("table",[s("tr",[s("td",{staticClass:"text-semi"},[t._v("电子邮箱")]),s("td",{staticClass:"text-gray"},[t._v(t._s(t.detail.email||"未填写"))])]),s("tr",[s("td",{staticClass:"text-semi"},[t._v("性 别")]),s("td",{staticClass:"text-gray"},[t._v(t._s(1===t.detail.gender?"女":"男"))])]),s("tr",[s("td",{staticClass:"text-semi"},[t._v("状 态")]),s("td",{staticClass:"text-gray"},[t._v(t._s("正常"))])])])])]),s("div")]),s("div",{staticClass:"flex justify-end"},[s("vs-button",{attrs:{icon:"el-icon-edit","icon-pack":"el-icon"},on:{click:function(e){return t.editAdmin()}}},[t._v("编 辑")])],1)]),s("div",{staticClass:"permission p-5 light-shadow bg-semi rounded-lg"},[s("p",{staticClass:"text-lg text-semi"},[t._v("权 限")]),s("vs-divider"),s("EditPermission",{attrs:{permissions:t.detail.permissions}})],1)])},[],!1,null,"2b1e69b9",null);e.default=l.exports},"86df":function(t,e,s){},"9e95":function(t,e,s){"use strict";var i=s("86df");s.n(i).a}}]);