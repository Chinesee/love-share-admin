(window.webpackJsonp=window.webpackJsonp||[]).push([["UserList"],{"1faf":function(t,s,e){"use strict";e.r(s);var a=e("1da1"),i=e("ca00"),r=e("1321");const l={chart:{type:"donut",offsetX:-50,offsetY:-12},dataLabels:{enabled:!1},legend:{show:!1},labels:["汉纸","妹纸","未设置"],plotOptions:{pie:{donut:{labels:{show:!0,name:{show:!1},value:{offsetY:4,fontSize:"16px",formatter:t=>`${t}人`},total:{show:!0,showAlways:!0,label:"销售额",formatter:t=>`${t.globals.seriesTotals.reduce((t,s)=>t+s,0)}人`}}}}},colors:["#6165f7","#EA5455","#bbb"]};var n={name:"UserStatistics",components:{VueApexCharts:e.n(r).a},data:()=>({chartOptions:l,series:[144,80,41]})},c=(e("e870"),e("2877")),d=Object(c.a)(n,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"flex"},[e("div",{staticClass:"card card-primary"},[e("div",{staticClass:"flex justify-between"},[e("div",[e("div",{staticClass:"title text-primary"},[t._v("用户总数")]),e("div",{staticClass:"num"},[t._v(t._s(5242))])]),e("div",{staticClass:"icon"},[e("feather",{attrs:{type:"users"}})],1)]),e("div",{staticClass:"flex items-center text-sm"},[e("span",{staticClass:"text-gray"},[t._v("近一周涨幅")]),e("div",{staticClass:"ml-1 flex items-center primary"},[e("feather",{attrs:{size:"18",type:"arrow-up"}}),e("span",{staticClass:"font-bold"},[t._v("4.20%")])],1)])]),e("div",{staticClass:"card ml-4 card-success"},[e("div",{staticClass:"flex justify-between"},[e("div",[e("div",{staticClass:"title text-primary"},[t._v("今日新增")]),e("div",{staticClass:"num"},[t._v(t._s(298))])]),e("div",{staticClass:"icon"},[e("feather",{attrs:{type:"user-plus"}})],1)]),e("div",{staticClass:"flex items-center text-sm"},[e("span",{staticClass:"text-gray"},[t._v("相对于昨天")]),e("div",{staticClass:"ml-1 flex items-center success"},[e("feather",{attrs:{size:"18",type:"arrow-up"}}),e("span",{staticClass:"font-bold"},[t._v("2.50%")])],1)])]),e("div",{staticClass:"card ml-4 card-danger"},[e("div",{staticClass:"flex justify-between"},[e("div",[e("div",{staticClass:"title text-primary"},[t._v("黑名单")]),e("div",{staticClass:"num"},[t._v(t._s(125))])]),e("div",{staticClass:"icon"},[e("feather",{attrs:{type:"user-minus"}})],1)]),e("div",{staticClass:"flex items-center text-sm"},[e("span",{staticClass:"text-gray"},[t._v("最近一月")]),e("div",{staticClass:"ml-1 flex items-center danger"},[e("feather",{attrs:{size:"18",type:"arrow-up"}}),e("span",{staticClass:"font-bold"},[t._v("2.50%")])],1)])]),e("div",{staticClass:"card relative ml-4 p-4 flex justify-end bg-gray"},[e("vue-apex-charts",{staticClass:" absolute left-0",attrs:{height:"165",type:"donut",options:t.chartOptions,series:t.series}}),t._m(0)],1)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("ul",{staticClass:"mr-2"},[s("li",{staticClass:"flex items-center text-gray"},[s("div",{staticClass:"w-3 h-3 mr-2 rounded-full bg-primary"}),s("span",[this._v("汉纸")])]),s("li",{staticClass:"flex items-center text-gray"},[s("div",{staticClass:"w-3 h-3 mr-2 rounded-full bg-danger"}),s("span",[this._v("妹纸")])]),s("li",{staticClass:"flex items-center text-gray"},[s("div",{staticClass:"w-3 h-3 mr-2 rounded-full",staticStyle:{background:"#bbb"}}),s("span",[this._v("未知")])])])}],!1,null,"b876d592",null).exports,o=e("6b5b"),v={name:"UserList",components:{UserStatistics:d},data:()=>({setCreditColor:i.g,userList:[],showPopup:!1}),activated(){this.getUserList()},methods:{getUserList(){var t=this;return Object(a.a)(function*(){const s=yield Object(o.d)(),e=s.code,a=s.data;2e3===e&&(t.userList=a.user_list)})()},contactUser(t,s){var e=this;return Object(a.a)(function*(){if(e.$bind()){if(!e.$store.getters["chat/isInChat"](t)){if(2e3!==(yield e.$store.dispatch("chat/addContact",t)))return}e.$store.commit("chat/SET_ACTIVE_CHAT_USER",{_id:t,nickname:s}),e.$store.commit("chat/SET_CHAT_OPEN")}else e.$vs.notify({time:4e3,title:"请绑定用户",text:"您的管理员账号尚未绑定用户，请前往个人中心进行绑定",color:"warning"})})()},blockUser(t){var s=this;return Object(a.a)(function*(){2e3===(yield Object(o.f)({user_id:t,is_blocked:!0,info:"该用户存在违规行为"})).code&&(s.$message.error("用户已禁用，可在用户黑名单中查看"),s.userList.splice(s.userList.findIndex(s=>s._id===t),1))})()},deleteUser(){}}},u=Object(c.a)(v,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"pt-6"},[e("UserStatistics",{staticClass:"mb-8"}),e("div",{staticClass:"p-4 radius bg-semi overflow-hidden"},[e("vs-table",{attrs:{search:"",pagination:"",noDataText:"暂无数据","max-items":4,data:t.userList},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.data;return t._l(a,function(s,a){return e("vs-tr",{key:a},[e("vs-td",[e("vs-avatar",{attrs:{size:"40px",src:s.avatar_url+"?imageView2/2/w/40"},on:{click:function(e){return t.$router.push({path:"/user-detail",query:{userId:s._id}})}}})],1),e("vs-td",{staticClass:"font-bold"},[t._v(t._s(s.nickname))]),e("vs-td",[e("vs-progress",{attrs:{height:8,title:s.credit_value+"分",percent:s.credit_value/1e3*100,color:t.setCreditColor(s.credit_value)}})],1),e("vs-td",[e("p",{staticClass:"ml-4 font-bold"},[t._v(t._s(s.share_value))])]),e("vs-td",[e("p",[t._v(t._s(t.$dayjs(s.created_at).format("YYYY/MM/DD")))])]),e("vs-td",[e("el-dropdown",[e("i",{staticClass:"el-icon-more text-semi"}),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(e){return t.contactUser(s._id,s.nickname)}}},[e("div",{staticClass:"flex-row-center"},[e("feather",{staticClass:"mr-2",attrs:{size:"17","stroke-width":"1.4",type:"message-square"}}),t._v("\n                    联系\n                  ")],1)]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.$router.push({path:"/user-detail",query:{userId:s._id}})}}},[e("div",{staticClass:"flex-row-center"},[e("feather",{staticClass:"mr-2",attrs:{size:"17","stroke-width":"1.4",type:"disc"}}),t._v("\n                    查看\n                  ")],1)]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.blockUser(s._id)}}},[e("div",{staticClass:"flex-row-center"},[e("feather",{staticClass:"mr-2",attrs:{size:"17","stroke-width":"1.4",type:"user-x"}}),t._v("\n                    禁用\n                  ")],1)]),e("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(s){return t.deleteUser()}}},[e("div",{staticClass:"flex-row-center danger"},[e("feather",{staticClass:"mr-2",attrs:{size:"17","stroke-width":"1.4",type:"trash-2"}}),t._v("\n                    删除\n                  ")],1)])],1)],1)],1)],1)})}}])},[e("template",{slot:"thead"},[e("vs-th",[t._v("头像")]),e("vs-th",[t._v("昵称")]),e("vs-th",[t._v("信用度")]),e("vs-th",[t._v("乐享值")]),e("vs-th",[t._v("注册时间")])],1)],2)],1)],1)},[],!1,null,null,null);s.default=u.exports},"45d0":function(t,s,e){},e870:function(t,s,e){"use strict";var a=e("45d0");e.n(a).a}}]);