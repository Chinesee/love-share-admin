(window.webpackJsonp=window.webpackJsonp||[]).push([["AdminCreate"],{1169:function(t,e,r){var n=r("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"2d82":function(t,e,r){},"2e72":function(t,e,r){},"37c8":function(t,e,r){e.f=r("2b4c")},"3a72":function(t,e,r){var n=r("7726"),a=r("8378"),o=r("2d00"),i=r("37c8"),s=r("86cc").f;t.exports=function(t){var e=a.Symbol||(a.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:i.f(t)})}},"3bda":function(t,e,r){"use strict";var n=function(t,e,r){e?/^[\d\w\u4e00-\u9fa5,.;:"'?!-]{2,12}$/.test(e)||r(new Error("昵称的格式不正确")):r(new Error("请填写昵称")),r()},a=function(t,e,r){e?/^[\u4e00-\u9fa5]{1,6}(·[\u4e00-\u9fa5]{1,6}){0,2}$/.test(e)||r(new Error("姓名的格式不正确")):r(new Error("请填写姓名")),r()},o=function(t,e,r){e?/^[\w.-]+@(?:[a-z0-9]+(?:-[a-z0-9]+)*\.)+[a-z]{2,3}$/.test(e)||r(new Error("邮箱的格式不正确")):r(),r()},i={name:"EditForm",props:{formData:Object},data:function(){return{form:{},rules:{nickname:[{validator:n,trigger:"blur"}],real_name:[{validator:a,trigger:"blur"}],email:[{validator:o,trigger:"blur"}]}}},watch:{formData:{handler:function(t){this.form=t||{account:"",nickname:"",real_name:"",email:""}},immediate:!0}},methods:{submit:function(){var t;return this.$refs.form.validate(function(e){return e?(t=!0,!0):(t=!1,!1)}),t}}},s=(r("83ca"),r("2877")),c=Object(s.a)(i,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-form",{ref:"form",staticClass:"edit",attrs:{"hide-required-asterisk":"",rules:t.rules,model:t.form}},[r("el-form-item",{attrs:{label:"登入账号",prop:"account",required:""}},[r("el-input",{attrs:{placeholder:"请填写登入账号"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),r("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[r("el-input",{attrs:{placeholder:"只能是中文、字母、数字"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),r("el-form-item",{attrs:{label:"真实姓名",prop:"real_name"}},[r("el-input",{model:{value:t.form.real_name,callback:function(e){t.$set(t.form,"real_name",e)},expression:"form.real_name"}})],1),r("el-form-item",{attrs:{label:"邮箱（选填）",prop:"email"}},[r("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1)],1)},[],!1,null,"17dcd5f5",null);e.a=c.exports},4411:function(t,e,r){"use strict";r("6762"),r("2fdb");var n=r("5d58"),a=r.n(n),o=r("67bb"),i=r.n(o);function s(t){return(s="function"==typeof i.a&&"symbol"==typeof a.a?function(t){return typeof t}:function(t){return t&&"function"==typeof i.a&&t.constructor===i.a&&t!==i.a.prototype?"symbol":typeof t})(t)}function c(t){return(c="function"==typeof i.a&&"symbol"===s(a.a)?function(t){return s(t)}:function(t){return t&&"function"==typeof i.a&&t.constructor===i.a&&t!==i.a.prototype?"symbol":s(t)})(t)}r("ac4d"),r("8a81"),r("ac6a"),r("456d");var l={name:"EditPermission",props:{editable:{type:Boolean,default:!1},allSelected:Boolean,permissions:Array},data:function(){return{per:[],modules:{user:"用户",goods:"商品",order:"订单",comment:"留言",guide:"指引",admin:"管理员"},actions:["read","write","create","delete"]}},watch:{permissions:{handler:function(t){t?this.setPermissions():this.initValues()},immediate:!0},allSelected:function(t){this.setAllCheckboxStatus(t)}},methods:{initValues:function(){var t=this,e=[{read:!1},{write:!1},{create:!1},{delete:!1}];this.per=Object.keys(this.modules).map(function(r){return{module:r,purview:t.$cloneDeepWith(e)}})},setPermissions:function(){var t=this,e=this.$cloneDeepWith(this.permissions);this.per=Object.keys(this.modules).map(function(r){var n=!0,a=!1,o=void 0;try{for(var i,s=function(){var e=i.value;if(e.module===r)return{v:{module:r,purview:t.actions.map(function(t){var r={};return r["".concat(t)]=e.purview.includes(t),r})}}},l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=s();if("object"===c(u))return u.v}}catch(t){a=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return{module:r,purview:[{read:!1},{write:!1},{create:!1},{delete:!1}]}})},setAllCheckboxStatus:function(t){var e=this;this.per.forEach(function(r){r.purview.forEach(function(r,n){r[e.actions[n]]=t})})},getPermissions:function(){var t=this;return this.per.map(function(e){return{module:e.module,purview:e.purview.filter(function(e,r){return e[t.actions[r]]}).map(function(t){return Object.keys(t)[0]})}})}}},u=(r("9e95"),r("2877")),f=Object(u.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.per?r("table",{staticClass:"permission"},[t._m(0),t._l(t.per,function(e,n){return r("tr",{key:n},[r("td",[t._v(t._s(t.modules[e.module]))]),t._l(e.purview,function(e,n){return r("td",{key:n},[r("vs-checkbox",{class:{"pointer-events-none":!t.editable},attrs:{disabled:!t.editable},model:{value:e[t.actions[n]],callback:function(r){t.$set(e,t.actions[n],r)},expression:"td[actions[j]]"}})],1)})],2)})],2):t._e()])},[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("Module")]),e("th",[this._v("Read")]),e("th",[this._v("Write")]),e("th",[this._v("Create")]),e("th",[this._v("Delete")])])}],!1,null,"19adfc7a",null);e.a=f.exports},"456d":function(t,e,r){var n=r("4bf8"),a=r("0d58");r("5eda")("keys",function(){return function(t){return a(n(t))}})},"5d58":function(t,e,r){t.exports=r("d8d6")},"5eda":function(t,e,r){var n=r("5ca1"),a=r("8378"),o=r("79e5");t.exports=function(t,e){var r=(a.Object||{})[t]||Object[t],i={};i[t]=e(r),n(n.S+n.F*o(function(){r(1)}),"Object",i)}},"67ab":function(t,e,r){var n=r("ca5a")("meta"),a=r("d3f4"),o=r("69a8"),i=r("86cc").f,s=0,c=Object.isExtensible||function(){return!0},l=!r("79e5")(function(){return c(Object.preventExtensions({}))}),u=function(t){i(t,n,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[n].i},getWeak:function(t,e){if(!o(t,n)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[n].w},onFreeze:function(t){return l&&f.NEED&&c(t)&&!o(t,n)&&u(t),t}}},"67bb":function(t,e,r){t.exports=r("f921")},"7bbc":function(t,e,r){var n=r("6821"),a=r("9093").f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return i&&"[object Window]"==o.call(t)?function(t){try{return a(t)}catch(t){return i.slice()}}(t):a(n(t))}},"83ca":function(t,e,r){"use strict";var n=r("fd60");r.n(n).a},"8a81":function(t,e,r){"use strict";var n=r("7726"),a=r("69a8"),o=r("9e1e"),i=r("5ca1"),s=r("2aba"),c=r("67ab").KEY,l=r("79e5"),u=r("5537"),f=r("7f20"),d=r("ca5a"),p=r("2b4c"),m=r("37c8"),v=r("3a72"),b=r("d4c0"),h=r("1169"),y=r("cb7c"),w=r("d3f4"),g=r("4bf8"),x=r("6821"),_=r("6a99"),k=r("4630"),E=r("2aeb"),S=r("7bbc"),P=r("11e9"),O=r("2621"),j=r("86cc"),C=r("0d58"),$=P.f,A=j.f,F=S.f,N=n.Symbol,G=n.JSON,I=G&&G.stringify,D=p("_hidden"),U=p("toPrimitive"),J={}.propertyIsEnumerable,R=u("symbol-registry"),W=u("symbols"),z=u("op-symbols"),K=Object.prototype,M="function"==typeof N&&!!O.f,T=n.QObject,q=!T||!T.prototype||!T.prototype.findChild,B=o&&l(function(){return 7!=E(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=$(K,e);n&&delete K[e],A(t,e,r),n&&t!==K&&A(K,e,n)}:A,V=function(t){var e=W[t]=E(N.prototype);return e._k=t,e},Y=M&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Q=function(t,e,r){return t===K&&Q(z,e,r),y(t),e=_(e,!0),y(r),a(W,e)?(r.enumerable?(a(t,D)&&t[D][e]&&(t[D][e]=!1),r=E(r,{enumerable:k(0,!1)})):(a(t,D)||A(t,D,k(1,{})),t[D][e]=!0),B(t,e,r)):A(t,e,r)},H=function(t,e){y(t);for(var r,n=b(e=x(e)),a=0,o=n.length;o>a;)Q(t,r=n[a++],e[r]);return t},L=function(t){var e=J.call(this,t=_(t,!0));return!(this===K&&a(W,t)&&!a(z,t))&&(!(e||!a(this,t)||!a(W,t)||a(this,D)&&this[D][t])||e)},X=function(t,e){if(t=x(t),e=_(e,!0),t!==K||!a(W,e)||a(z,e)){var r=$(t,e);return!r||!a(W,e)||a(t,D)&&t[D][e]||(r.enumerable=!0),r}},Z=function(t){for(var e,r=F(x(t)),n=[],o=0;r.length>o;)a(W,e=r[o++])||e==D||e==c||n.push(e);return n},tt=function(t){for(var e,r=t===K,n=F(r?z:x(t)),o=[],i=0;n.length>i;)!a(W,e=n[i++])||r&&!a(K,e)||o.push(W[e]);return o};M||(s((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(r){this===K&&e.call(z,r),a(this,D)&&a(this[D],t)&&(this[D][t]=!1),B(this,t,k(1,r))};return o&&q&&B(K,t,{configurable:!0,set:e}),V(t)}).prototype,"toString",function(){return this._k}),P.f=X,j.f=Q,r("9093").f=S.f=Z,r("52a7").f=L,O.f=tt,o&&!r("2d00")&&s(K,"propertyIsEnumerable",L,!0),m.f=function(t){return V(p(t))}),i(i.G+i.W+i.F*!M,{Symbol:N});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;et.length>rt;)p(et[rt++]);for(var nt=C(p.store),at=0;nt.length>at;)v(nt[at++]);i(i.S+i.F*!M,"Symbol",{for:function(t){return a(R,t+="")?R[t]:R[t]=N(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in R)if(R[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),i(i.S+i.F*!M,"Object",{create:function(t,e){return void 0===e?E(t):H(E(t),e)},defineProperty:Q,defineProperties:H,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var ot=l(function(){O.f(1)});i(i.S+i.F*ot,"Object",{getOwnPropertySymbols:function(t){return O.f(g(t))}}),G&&i(i.S+i.F*(!M||l(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],a=1;arguments.length>a;)n.push(arguments[a++]);if(r=e=n[1],(w(e)||void 0!==t)&&!Y(t))return h(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Y(e))return e}),n[1]=e,I.apply(G,n)}}),N.prototype[U]||r("32e9")(N.prototype,U,N.prototype.valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},"8be0":function(t,e,r){"use strict";r.r(e);r("96cf");var n=r("3b8d"),a=r("b0e1"),o=r("3bda"),i=r("bb2a"),s=r("4411"),c=r("518e"),l={name:"AdminCreate",components:{EditAvatar:a.a,EditForm:o.a,EditPassword:i.a,EditPermission:s.a},data:function(){return{allSelected:!1}},methods:{onCreate:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,r,n,a,o,i,s,l,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.$refs,r=e.editAvatar,n=e.editForm,a=e.editPassword,o=e.editPermissions,!n.submit()||!a.submit()){t.next=19;break}return this.$vs.loading({container:"#main",scale:1}),i=o.getPermissions(),s=Object.assign(n.form,a.form,{avatar_url:r.avatarUrl},{gender:r.selectedGender},{permissions:i}),t.prev=5,t.next=8,Object(c.b)(s);case 8:l=t.sent,2e3===(u=l.code)?this.$router.push("/admin-list"):4002===u?this.$vs.notify({time:3e3,title:"创建失败",text:"昵称已存在，请重新填写",color:"warning"}):4003===u&&this.$vs.notify({time:3e3,title:"创建失败",text:"账号已存在，请直接登录",color:"warning"}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),this.$vs.notify({time:3e3,title:"创建失败",text:t.t0,color:"danger"});case 16:return t.prev=16,this.$vs.loading.close("#main > .con-vs-loading"),t.finish(16);case 19:case"end":return t.stop()}},t,this,[[5,13,16,19]])}));return function(){return t.apply(this,arguments)}}()}},u=r("2877"),f=Object(u.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt-6 p-6 bg-semi radius vs-con-loading__container",attrs:{id:"main"}},[r("div",{staticClass:"mb-6 flex items-center"},[r("div",{staticClass:"pr-10 flex flex-col items-center justify-center"},[r("EditAvatar",{ref:"editAvatar"})],1),r("div",{staticClass:"flex-1"},[r("div",{staticClass:"flex"},[r("div",{staticClass:"w-1/2 pr-4"},[r("EditForm",{ref:"editForm"})],1),r("div",{staticClass:"w-1/2 pl-4"},[r("EditPassword",{ref:"editPassword"})],1)])])]),r("div",{staticClass:"mb-5 radius"},[r("div",{staticClass:"mb-2 py-4 px-2 flex items-center justify-between",staticStyle:{"box-shadow":"0 10px 10px 0 rgba(var(--vs-gray),0.06)"}},[r("p",{staticClass:"text-lg text-semi"},[t._v("权 限")]),r("div",[r("vs-switch",{model:{value:t.allSelected,callback:function(e){t.allSelected=e},expression:"allSelected"}},[r("span",{attrs:{slot:"on"},slot:"on"},[t._v("全选")]),r("span",{attrs:{slot:"off"},slot:"off"},[t._v("全选")])])],1)]),r("EditPermission",{ref:"editPermissions",staticClass:"px-1",attrs:{"all-selected":t.allSelected,editable:!0}})],1),r("div",{staticClass:"flex justify-end"},[r("vs-button",{on:{click:function(e){return t.onCreate()}}},[t._v("信息无误，确认创建")])],1)])},[],!1,null,null,null);e.default=f.exports},"9e95":function(t,e,r){"use strict";var n=r("2d82");r.n(n).a},ac4d:function(t,e,r){r("3a72")("asyncIterator")},b0e1:function(t,e,r){"use strict";r("c5f6");var n=r("8bbf"),a=r.n(n).a.component("ReplaceAvatar",function(){return Promise.all([r.e("chunk-908ae0c2"),r.e("chunk-b84babcc")]).then(r.bind(null,"0a78"))}),o={male:"https://cdn.hrspider.top/default_avatar_male.jpg",female:"https://cdn.hrspider.top/default_avatar_female.jpg"},i={name:"EditAvatar",components:{ReplaceAvatar:a},props:{adminId:String,avatar:String,gender:Number},data:function(){return{defaultAvatar:o,selectedGender:0,avatarUrl:"https://cdn.hrspider.top/default_avatar_male.jpg",showAvatarPopup:!1}},watch:{selectedGender:{handler:function(t){var e=this.defaultAvatar,r=e.male,n=e.female;this.avatarUrl!==r&&this.avatarUrl!==n||(this.avatarUrl=t?n:r)},immediate:!0},avatar:{handler:function(t){(null==t?void 0:t.length)>0&&(this.avatarUrl=t)},immediate:!0},gender:{handler:function(t){t&&(this.selectedGender=t)},immediate:!0}}},s=r("2877"),c=Object(s.a)(i,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("img",{staticClass:"heavy-shadow radius",attrs:{width:"150px",src:t.avatarUrl}}),r("div",{staticClass:"my-3  flex"},[r("div",{staticClass:"mr-3 px-3 py-1 primary rounded-lg cursor-pointer",staticStyle:{background:"rgba(var(--vs-primary), 0.1)"},on:{click:function(e){t.selectedGender=0}}},[t._v("\n      汉子\n      "),r("i",{directives:[{name:"show",rawName:"v-show",value:!t.selectedGender,expression:"!selectedGender"}],staticClass:"el-icon-check"})]),r("div",{staticClass:"px-3 py-1 danger rounded-lg cursor-pointer",staticStyle:{background:"rgba(var(--vs-danger), 0.1)"},on:{click:function(e){t.selectedGender=1}}},[t._v("\n      妹纸\n      "),r("i",{directives:[{name:"show",rawName:"v-show",value:t.selectedGender,expression:"selectedGender"}],staticClass:"el-icon-check"})])]),t.adminId?r("vs-button",{staticClass:"w-full max-w-xs",attrs:{size:"small",type:"border"},on:{click:function(e){t.showAvatarPopup=!0}}},[t._v("更换头像")]):t._e(),r("ReplaceAvatar",{ref:"replaceAvatar",attrs:{"admin-id":t.adminId,popupActive:t.showAvatarPopup},on:{updateInfo:function(e){return t.$emit("updateInfo")},closePopup:function(e){t.showAvatarPopup=!1}}})],1)},[],!1,null,null,null);e.a=c.exports},bb2a:function(t,e,r){"use strict";var n=function(t,e,r){e||r(new Error("请填写原始密码")),r()},a=function(t,e,r){e?/^[\w]{6,16}$/.test(e)||r(new Error("密码不符合规范")):r(new Error("请填写密码")),r()},o={name:"EditPassword",data:function(){var t=this;return{form:{oldPassword:"",password:"",password2:""},rules:{oldPassword:[{validator:n,trigger:"blur"}],password:[{validator:a,trigger:"blur"}],password2:[{validator:function(e,r,n){r?r!==t.form.password&&n(new Error("与前一次密码不一致")):n(new Error("请确认二次密码")),n()},trigger:"blur"}]}}},methods:{submit:function(){var t;return this.$refs.form.validate(function(e){return e?(t=!0,!0):(t=!1,!1)}),t}}},i=(r("ea7f"),r("2877")),s=Object(i.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-form",{ref:"form",staticClass:"edit",attrs:{"label-position":"top",rules:t.rules,model:t.form}},[r("el-form-item",{attrs:{label:"原始密码",prop:"oldPassword"}},[r("el-input",{attrs:{type:"password",placeholder:"请填写账号原始密码"},model:{value:t.form.oldPassword,callback:function(e){t.$set(t.form,"oldPassword",e)},expression:"form.oldPassword"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"6-16个字符，只能是字母、数字和下划线"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"password2"}},[r("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:t.form.password2,callback:function(e){t.$set(t.form,"password2",e)},expression:"form.password2"}})],1)],1)],1)},[],!1,null,"9c93887c",null);e.a=s.exports},d4c0:function(t,e,r){var n=r("0d58"),a=r("2621"),o=r("52a7");t.exports=function(t){var e=n(t),r=a.f;if(r)for(var i,s=r(t),c=o.f,l=0;s.length>l;)c.call(t,i=s[l++])&&e.push(i);return e}},ea7f:function(t,e,r){"use strict";var n=r("2e72");r.n(n).a},fd60:function(t,e,r){}}]);