{"version":3,"sources":["webpack:///./src/views/admin/AdminEdit.vue?7089","webpack:///src/views/admin/AdminEdit.vue","webpack:///./src/views/admin/AdminEdit.vue?f652","webpack:///./src/views/admin/AdminEdit.vue","webpack:///./src/views/admin/AdminEdit.vue?2c47"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","icon","icon-pack","label","ref","admin-id","detail","_id","avatar","avatar_url","gender","on","updateInfo","$event","getAdminDetail","form-data","info","staticStyle","border-width","border-style","_v","permissions","editable","click","onUpdateAmin","staticRenderFns","AdminEditvue_type_script_lang_js_","name","components","EditAvatar","EditForm","EditPassword","EditPermission","data","created","methods","_getAdminDetail2","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_ref","code","admin_detail","wrap","_context","prev","next","admin","admin_id","$route","query","adminId","sent","nickname","real_name","email","stop","apply","arguments","_onUpdateAmin","_callee2","payload","_ref2","msg","_context2","$refs","editForm","submit","$vs","loading","container","scale","assign","editAvatar","selectedGender","editPermissions","getPermissions","form","notify","title","text","color","Error","t0","close","finish","admin_AdminEditvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_sass_resources_loader_lib_loader_js_ref_8_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AdminEdit_vue_vue_type_style_index_0_id_d94f91b4_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_sass_resources_loader_lib_loader_js_ref_8_oneOf_1_4_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_AdminEdit_vue_vue_type_style_index_0_id_d94f91b4_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-febd64b4.46bfeae1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('vs-tabs',{staticClass:\"p-6 bg-primary vs-con-loading__container\",attrs:{\"id\":\"main\"}},[_c('vs-tab',{staticClass:\"px-4 py-10\",attrs:{\"icon\":\"el-icon-user\",\"icon-pack\":\"el-icon\",\"label\":\"账号信息\"}},[_c('div',{staticClass:\"mb-8 flex\"},[_c('div',{staticClass:\"mr-16\"},[_c('EditAvatar',{ref:\"editAvatar\",attrs:{\"admin-id\":_vm.detail._id,\"avatar\":_vm.detail.avatar_url,\"gender\":_vm.detail.gender},on:{\"updateInfo\":function($event){return _vm.getAdminDetail()}}})],1),_c('div',{staticClass:\"w-1/3\"},[_c('EditForm',{ref:\"editForm\",attrs:{\"form-data\":_vm.info}})],1)]),_c('div',{staticClass:\"mb-5 p-5 rounded-lg border-primary\",staticStyle:{\"border-width\":\"1px\",\"border-style\":\"solid\"}},[_c('p',{staticClass:\"text-lg text-semi\"},[_vm._v(\"权 限\")]),_c('vs-divider'),_c('EditPermission',{ref:\"editPermissions\",attrs:{\"permissions\":_vm.detail.permissions,\"editable\":true}})],1),_c('div',{staticClass:\"flex\"},[_c('vs-button',{staticClass:\"save ml-auto\",on:{\"click\":function($event){return _vm.onUpdateAmin()}}},[_vm._v(\"保存设置\")])],1)]),_c('vs-tab',{staticClass:\"px-4 py-10\",attrs:{\"icon\":\"el-icon-key\",\"icon-pack\":\"el-icon\",\"label\":\"安全设置\"}},[_c('div',[_c('EditPassword')],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <vs-tabs\n      id=\"main\"\n      class=\"p-6 bg-primary vs-con-loading__container\"\n    >\n      <vs-tab\n        class=\"px-4 py-10\"\n        icon=\"el-icon-user\"\n        icon-pack=\"el-icon\"\n        label=\"账号信息\"\n      >\n        <div class=\"mb-8 flex\">\n          <div class=\"mr-16\">\n            <EditAvatar\n              ref=\"editAvatar\"\n              :admin-id=\"detail._id\"\n              :avatar=\"detail.avatar_url\"\n              :gender=\"detail.gender\"\n              @updateInfo=\"getAdminDetail()\"\n            />\n          </div>\n          <div class=\"w-1/3\">\n            <EditForm\n              ref=\"editForm\"\n              :form-data=\"info\"\n            />\n          </div>\n        </div>\n\n        <div\n          class=\"mb-5 p-5 rounded-lg border-primary\"\n          style=\"border-width: 1px; border-style: solid;\"\n        >\n          <p class=\"text-lg text-semi\">权 限</p>\n          <vs-divider />\n          <EditPermission\n            ref=\"editPermissions\"\n            :permissions=\"detail.permissions\"\n            :editable=\"true\"\n          />\n        </div>\n\n        <div class=\"flex\">\n          <vs-button\n            class=\"save ml-auto\"\n            @click=\"onUpdateAmin()\"\n          >保存设置</vs-button>\n        </div>\n      </vs-tab>\n      <vs-tab\n        class=\"px-4 py-10\"\n        icon=\"el-icon-key\"\n        icon-pack=\"el-icon\"\n        label=\"安全设置\"\n      >\n        <div>\n          <EditPassword />\n        </div>\n      </vs-tab>\n    </vs-tabs>\n  </div>\n</template>\n\n<script>\nimport EditAvatar from './edit/EditAvatar.vue'\nimport EditForm from './edit/EditForm.vue'\nimport EditPassword from './edit/EditPassword.vue'\nimport EditPermission from './edit/EditPermission.vue'\n\nimport { getAdminDetail, updateAdmin } from '@/request/api/admin'\n\nexport default {\n  name: 'AdminEdit',\n  components: {\n    EditAvatar, EditForm, EditPassword, EditPermission,\n  },\n\n  data: () => ({\n    info: {},\n    detail: {},\n  }),\n\n  created() {\n    this.getAdminDetail()\n  },\n\n  methods: {\n    // 获取管理员详细信息\n    async getAdminDetail() {\n      const {\n        code,\n        data: { admin_detail },\n      } = await getAdminDetail({ admin_id: this.$route.query.adminId })\n      if (code === 2000) {\n        this.detail = admin_detail\n        this.info = {\n          _id: admin_detail._id,\n          nickname: admin_detail.nickname,\n          real_name: admin_detail.real_name,\n          email: admin_detail.email,\n        }\n      }\n    },\n\n    // 更新管理员信息\n    async onUpdateAmin() {\n      if (this.$refs.editForm.submit()) {\n        this.$vs.loading({ container: '#main', scale: 1 })\n\n        const payload = Object.assign({\n          admin_id: this.info._id,\n          gender: this.$refs.editAvatar.selectedGender,\n          permissions: this.$refs.editPermissions.getPermissions(),\n        }, this.$refs.editForm.form)\n\n        try {\n          const { code, msg } = await updateAdmin(payload)\n          if (code === 2000) {\n            await this.getAdminDetail()\n            this.$vs.notify({\n              title: '信息更新成功',\n              text: msg,\n              color: 'success',\n            })\n          } else {\n            throw new Error(msg)\n          }\n        } catch (err) {\n          this.$vs.notify({\n            title: '信息更新失败',\n            text: err,\n            color: 'danger',\n          })\n        } finally {\n          this.$vs.loading.close('#main > .con-vs-loading')\n        }\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.vs-tabs::v-deep {\n  .ul-tabs {\n    box-shadow: none;\n    .vs-tabs--li {\n      color: #888;\n    }\n  }\n  // \"保存设置\" 按钮\n  .save:hover {\n    color: white !important;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminEdit.vue?vue&type=template&id=d94f91b4&scoped=true&\"\nimport script from \"./AdminEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminEdit.vue?vue&type=style&index=0&id=d94f91b4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d94f91b4\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminEdit.vue?vue&type=style&index=0&id=d94f91b4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminEdit.vue?vue&type=style&index=0&id=d94f91b4&lang=scss&scoped=true&\""],"sourceRoot":""}