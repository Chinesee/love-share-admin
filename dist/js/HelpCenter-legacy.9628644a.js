(window.webpackJsonp=window.webpackJsonp||[]).push([["HelpCenter"],{"47ed":function(t,e,i){"use strict";var n=i("e103");i.n(n).a},"558b":function(t,e,i){"use strict";i.r(e);i("7514"),i("96cf");var n=i("3b8d"),r=i("5873"),a=i("9d63"),s=i.n(a),c=i("284b");function l(t){return Object(c.a)({url:"/guide/create",method:"post",data:t})}var o={name:"HelpCenter",components:{VueEditor:r.a,VuePerfectScrollbar:s.a},data:function(){return{guideList:[],article:{},payload:{section:"",articles:[{title:"",content:""}]},visible1:!1,visible2:!1,showEditor:!1,editData:{title:"",content:""},title:"",content:""}},watch:{visible1:function(t){t||(this.payload={section:"",articles:[{title:"",content:""}]})}},created:function(){this.getGuideList()},methods:{getGuideList:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,i,n,r,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)({url:"/guide/list",method:"get"});case 2:e=t.sent,i=e.code,n=e.data,2e3===i&&(this.guideList=n.guide_list,r=this.guideList.find(function(t){var e;return(null===(e=t.articles)||void 0===e?void 0:e.length)>0}),a=r._id,s=r.articles,this.getArticle(a,s[0]._id));case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),createGuide:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,i,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.payload,i=e.section,n=e.articles,!(i.length>0&&n[0].title.length>0)){t.next=12;break}if(!((r=this.guideList.filter(function(t){return t.section===i})).length>0)){t.next=8;break}return t.next=6,a={section_id:r[0]._id,title:n[0].title},Object(c.a)({url:"/guide/article/add",method:"post",data:a});case 6:t.next=10;break;case 8:return t.next=10,l(this.payload);case 10:this.getGuideList(),this.visible1=!1;case 12:case"end":return t.stop()}var a},t,this)}));return function(){return t.apply(this,arguments)}}(),deleteGuide:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n={section_id:e},Object(c.a)({url:"/guide/delete",method:"delete",data:n});case 2:i=t.sent,2e3===i.code&&this.getGuideList();case 5:case"end":return t.stop()}var n},t,this)}));return function(e){return t.apply(this,arguments)}}(),getArticle:function(t,e){var i=this;this.$loading(Object(n.a)(regeneratorRuntime.mark(function n(){var r,a,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.showEditor=!1,n.next=3,l={section_id:t,article_id:e},Object(c.a)({url:"/guide/article/content",method:"get",params:l});case 3:r=n.sent,a=r.code,s=r.data,2e3===a&&(i.article=s.article);case 7:case"end":return n.stop()}var l},n)})),{container:".article-container",scale:1})},onEditArticle:function(){this.showEditor=!0,this.editData=JSON.parse(JSON.stringify(this.article))},onUpdateArticle:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.editData.content.length>0)){t.next=9;break}return t.next=3,i=this.editData,Object(c.a)({url:"/guide/article/update",method:"put",data:i});case 3:if(e=t.sent,2e3!==e.code){t.next=9;break}return t.next=8,this.getGuideList();case 8:this.showEditor=!1;case 9:case"end":return t.stop()}var i},t,this)}));return function(){return t.apply(this,arguments)}}(),onDeleteArticle:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i={article_id:this.article._id},Object(c.a)({url:"/guide/article/delete",method:"delete",data:i});case 2:e=t.sent,2e3===e.code&&(this.getGuideList(),this.visible2=!1);case 5:case"end":return t.stop()}var i},t,this)}));return function(){return t.apply(this,arguments)}}()}},d=(i("47ed"),i("2877")),u=Object(d.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mt-4 flex items-start"},[i("div",{staticClass:"w-1/5"},[i("VuePerfectScrollbar",{staticClass:"scroll-area",staticStyle:{height:"550px","border-radius":"0.8rem"},attrs:{settings:{maxScrollbarLength:160,wheelSpeed:.6}}},[i("vs-collapse",{staticClass:"section"},t._l(t.guideList,function(e,n){return i("vs-collapse-item",{key:n,attrs:{open:""}},[i("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n            "+t._s(e.section)+"\n            "),i("el-dropdown",[i("i",{staticClass:"el-icon-more ml-1 text-xs text-gray"}),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(i){t.visible1=!0,t.payload.section=e.section,t.createGuide()}}},[t._v("\n                  添加文章\n                ")]),i("el-dropdown-item",[t._v("\n                  编辑栏目\n                ")]),e.articles.length<=0?i("el-dropdown-item",{staticClass:"danger",attrs:{divider:""},nativeOn:{click:function(i){return t.deleteGuide(e._id)}}},[t._v("\n                  删除栏目\n                ")]):t._e()],1)],1)],1),i("ul",{staticClass:"ml-2 text-semi"},t._l(e.articles,function(n,r){return i("li",{key:r,staticClass:"mb-2",on:{click:function(i){return t.getArticle(e._id,n._id)}}},[t._v("\n              "+t._s(n.title)+"\n            ")])}),0)])}),1)],1),i("div",[i("el-popover",{attrs:{placement:"top",trigger:"manual"},model:{value:t.visible1,callback:function(e){t.visible1=e},expression:"visible1"}},[i("div",[i("div",{staticClass:"mb-2 flex justify-end"},[i("i",{staticClass:"el-icon-close text-lg cursor-pointer",on:{click:function(e){t.visible1=!1}}})]),i("vs-input",{staticClass:"mb-4",attrs:{placeholder:"栏目名称"},model:{value:t.payload.section,callback:function(e){t.$set(t.payload,"section",e)},expression:"payload.section"}}),i("vs-input",{attrs:{placeholder:"文章标题"},model:{value:t.payload.articles[0].title,callback:function(e){t.$set(t.payload.articles[0],"title",e)},expression:"payload.articles[0].title"}}),i("vs-button",{staticClass:"mt-4 mb-3 w-full radius",on:{click:function(e){return t.createGuide()}}},[t._v("添加")])],1),i("div",{staticClass:"mt-5 w-full flex justify-center",attrs:{slot:"reference"},slot:"reference"},[i("div",{staticClass:"py-1 px-2 flex-row-center bg-primary radius text-white cursor-pointer",staticStyle:{width:"11rem","font-size":"0.9rem"},on:{click:function(e){t.visible1=!0}}},[i("div",{staticClass:"flex-1 text-center"},[t._v("\n              添加栏目\n            ")]),i("div",{staticClass:"ml-auto w-8 h-8 flex-row-center rounded-lg",staticStyle:{background:"rgba(121, 131, 255)"}},[i("feather",{attrs:{size:"20",type:"plus"}})],1)])])])],1)],1),i("div",{staticClass:"w-4/5 pl-6",staticStyle:{height:"550px"}},[i("div",{staticClass:"article-container h-full p-4 bg-gray rounded-lg vs-con-loading__container"},[i("div",{staticClass:"flex items-center justify-between"},[t.showEditor?i("div",[i("vs-input",{attrs:{label:"标题"},model:{value:t.editData.title,callback:function(e){t.$set(t.editData,"title",e)},expression:"editData.title"}})],1):i("div",[i("div",{staticClass:"text-semi text-xl font-bold"},[t._v(t._s(t.article.title))]),i("p",{staticClass:"text-gray text-xs"},[t._v("\n            最后更新于 "+t._s(t.$dayjs(t.article.updated_at).format("YYYY年M月DD日 HH:mm:ss"))+"\n          ")])]),t.showEditor?i("div",[i("vs-button",{on:{click:function(e){return t.onUpdateArticle()}}},[t._v("完成编辑")]),i("span",{staticClass:"ml-2 danger text-sm cursor-pointer",on:{click:function(e){t.showEditor=!1}}},[t._v("\n            取消\n          ")])],1):i("div",[i("vs-button",{staticClass:"text-sm",on:{click:function(e){return t.onEditArticle()}}},[t._v("编辑")]),i("el-popover",{attrs:{placement:"bottom",trigger:"click"},model:{value:t.visible2,callback:function(e){t.visible2=e},expression:"visible2"}},[i("p",{staticClass:"text-center"},[t._v("删除后将无法恢复")]),i("div",{staticClass:"text-center"},[i("vs-button",{attrs:{size:"small",type:"flat",color:"danger"},on:{click:function(e){return t.onDeleteArticle()}}},[t._v("确认删除")])],1),i("span",{staticClass:"ml-2 danger text-sm cursor-pointer",attrs:{slot:"reference"},slot:"reference"},[t._v("删除")])])],1)]),i("vs-divider"),i("VuePerfectScrollbar",{staticStyle:{height:"420px"},attrs:{settings:{maxScrollbarLength:160,wheelSpeed:.6}}},[!t.article.content&&!t.showEditor||t.article.content.length<=0&&!t.showEditor?i("div",{staticClass:"h-full flex flex-col justify-center items-center text-gray-400"},[i("i",{staticClass:"el-icon-warning-outline text-4xl"}),i("p",{staticClass:"mt-2 text-sm"},[t._v("未添加内容")])]):t._e(),t.showEditor?i("div",[i("vue-editor",{model:{value:t.editData.content,callback:function(e){t.$set(t.editData,"content",e)},expression:"editData.content"}})],1):i("div",{staticClass:"text-semi",domProps:{innerHTML:t._s(t.article.content)}})])],1)])])},[],!1,null,"85846766",null);e.default=u.exports},e103:function(t,e,i){}}]);