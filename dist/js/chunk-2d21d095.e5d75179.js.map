{"version":3,"sources":["webpack:///./src/views/sign/ForgetPassword.vue?2a6f","webpack:///src/views/sign/ForgetPassword.vue","webpack:///./src/views/sign/ForgetPassword.vue?36bb","webpack:///./src/views/sign/ForgetPassword.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_l","item","i","key","attrs","val-icon-warning","val-icon-danger","type","label-placeholder","placeholder","warning","isWarnng","warning-text","warningText","danger","isError","danger-text","errorText","description-text","description","on","focus","$event","keyup","indexOf","_k","keyCode","onResetPassword","model","value","callback","$$v","$set","trim","expression","id","color","gradient-color-secondary","disabled","resetBtnDisable","click","switchToSignIn","staticRenderFns","inputs","noneEmptyText","noneCheckText","ForgetPasswordvue_type_script_lang_js_","name","data","methods","_this","validate","check","$vs","loading","background","container","scale","_ref","account","password","Object","user","then","_ref2","code","notify","title","text","position","finally","close","every","input","length","test","$emit","document","sign_ForgetPasswordvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d21d095.e5d75179.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"w-full\"},[_c('p',{staticClass:\"w-full pb-4 flex items-center text-2xl font-bold text-gray-700\"},[_vm._v(\"\\n    重置密码\\n  \")]),_vm._l((_vm.inputs),function(item,i){return _c('vs-input',{key:i,staticClass:\"w-full pb-1\",attrs:{\"val-icon-warning\":\"warning\",\"val-icon-danger\":\"clear\",\"type\":item.type,\"label-placeholder\":item.placeholder,\"warning\":item.isWarnng,\"warning-text\":item.warningText,\"danger\":item.isError,\"danger-text\":item.errorText,\"description-text\":item.description},on:{\"focus\":function($event){item.isWarnng = false, item.isError = false},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }i === 2 ? _vm.onResetPassword() : ''}},model:{value:(item.value),callback:function ($$v) {_vm.$set(item, \"value\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"item.value\"}})}),_c('vs-button',{staticClass:\"w-full mt-3 mb-1 vs-con-loading__container\",attrs:{\"id\":\"resetBtn\",\"color\":\"rgba(var(--vs-primary), 1)\",\"gradient-color-secondary\":\"rgba(var(--vs-primary), .7)\",\"type\":\"gradient\",\"disabled\":_vm.resetBtnDisable},on:{\"click\":function($event){return _vm.onResetPassword()}}},[_vm._v(\"重置密码\")]),_c('p',{staticClass:\"mt-1 text-center text-gray-500 text-xs cursor-pointer\",on:{\"click\":function($event){return _vm.switchToSignIn()}}},[_vm._v(\"返回到登录\")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"w-full\">\n    <p class=\"w-full pb-4 flex items-center text-2xl font-bold text-gray-700\">\n      重置密码\n    </p>\n    <vs-input\n      class=\"w-full pb-1\"\n      val-icon-warning=\"warning\"\n      val-icon-danger=\"clear\"\n      v-for=\"(item, i) in inputs\"\n      :key=\"i\"\n      :type=\"item.type\"\n      :label-placeholder=\"item.placeholder\"\n      :warning=\"item.isWarnng\"\n      :warning-text=\"item.warningText\"\n      :danger=\"item.isError\"\n      :danger-text=\"item.errorText\"\n      :description-text=\"item.description\"\n      v-model.trim=\"item.value\"\n      @focus=\"item.isWarnng = false, item.isError = false\"\n      @keyup.enter=\"i === 2 ? onResetPassword() : ''\"\n    />\n    <vs-button\n      id=\"resetBtn\"\n      class=\"w-full mt-3 mb-1 vs-con-loading__container\"\n      color=\"rgba(var(--vs-primary), 1)\"\n      gradient-color-secondary=\"rgba(var(--vs-primary), .7)\"\n      type=\"gradient\"\n      :disabled=\"resetBtnDisable\"\n      @click=\"onResetPassword()\"\n    >重置密码</vs-button>\n    <p\n      class=\"mt-1 text-center text-gray-500 text-xs cursor-pointer\"\n      @click=\"switchToSignIn()\"\n    >返回到登录</p>\n  </div>\n</template>\n\n<script>\nimport { resetPassword } from '@/request/api/user'\n\nconst inputs = [\n  {\n    placeholder: '手机号码',\n    value: '',\n    type: 'text',\n    isWarnng: false,\n    isError: false,\n    warningText: '',\n    errorText: '',\n    description: '请填写注册时绑定的手机号码',\n    noneEmptyText: '请填写手机号',\n    noneCheckText: '请确认手机号的格式是否填写正确',\n  },\n  {\n    placeholder: '新密码',\n    value: '',\n    type: 'password',\n    isWarnng: false,\n    isError: false,\n    warningText: '',\n    errorText: '',\n    description: '6-16个字符，只能是字母、数字和下划线',\n    noneEmptyText: '密码不能为空，请输入密码',\n    noneCheckText: '密码格式不正确，请重新填写',\n  },\n  {\n    placeholder: '确认密码',\n    value: '',\n    type: 'password',\n    isWarnng: false,\n    isError: false,\n    warningText: '',\n    errorText: '',\n    description: '',\n    noneEmptyText: '密码不能为空，请输入密码',\n    noneCheckText: '与前一次不相同，请确保两次密码输入已知',\n  },\n]\n\nexport default {\n  name: 'SignReset',\n  data: () => ({\n    inputs,\n    resetBtnDisable: false,\n  }),\n\n  methods: {\n    onResetPassword() {\n      if (this.validate() && this.check()) {\n        // 显示登录按钮的加载动画\n        this.$vs.loading({\n          background: 'primary',\n          color: '#fff',\n          container: '#resetBtn',\n          scale: 0.45,\n        })\n        this.resetBtnDisable = true\n\n        const [account, password] = [this.inputs[0].value, this.inputs[1].value]\n\n        resetPassword({ account, password })\n          .then(({ code }) => {\n            if (code === 2000) {\n              this.$vs.notify({\n                title: '重置成功',\n                text: '密码已重置，请重新登录~',\n                position: 'top-center',\n                color: 'success',\n              })\n              this.switchToSignIn()\n            }\n          })\n          .finally(() => {\n            // 关闭按钮的加载动画\n            this.$vs.loading.close('#resetBtn > .con-vs-loading')\n            this.resetBtnDisable = false\n          })\n      }\n    },\n\n    // 输入框非空验证\n    validate() {\n      return this.inputs.every((input) => {\n        if (input.value.length <= 0) {\n          input.isWarnng = true\n          input.warningText = input.noneEmptyText\n          return false\n        }\n        return true\n      })\n    },\n\n    check() {\n      // 手机号码格式不正确，退出\n      if (!/^[1]([3-9])[0-9]{9}$/.test(this.inputs[0].value)) {\n        this.inputs[0].isError = true\n        this.inputs[0].errorText = this.inputs[0].noneCheckText\n        return false\n      }\n      if (!/^[\\w]{6,16}$/.test(this.inputs[1].value)) {\n        this.inputs[1].isError = true\n        this.inputs[1].errorText = this.inputs[1].noneCheckText\n        return false\n      }\n      if (this.inputs[1].value !== this.inputs[2].value) {\n        this.inputs[2].isError = true\n        this.inputs[2].errorText = this.inputs[2].noneCheckText\n        return false\n      }\n      return true\n    },\n\n    switchToSignIn() {\n      this.$emit('switchComponent', 'SignIn')\n      document.title = '登录 - 乐享校园'\n    },\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ForgetPassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ForgetPassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ForgetPassword.vue?vue&type=template&id=1fa3796b&\"\nimport script from \"./ForgetPassword.vue?vue&type=script&lang=js&\"\nexport * from \"./ForgetPassword.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}