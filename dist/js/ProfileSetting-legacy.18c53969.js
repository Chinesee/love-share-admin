(window.webpackJsonp=window.webpackJsonp||[]).push([["ProfileSetting"],{"2e72":function(e,t,r){},"3bda":function(e,t,r){"use strict";var a=function(e,t,r){t?/^[\d\w\u4e00-\u9fa5,.;:"'?!-]{2,12}$/.test(t)||r(new Error("昵称的格式不正确")):r(new Error("请填写昵称")),r()},n=function(e,t,r){t?/^[\u4e00-\u9fa5]{1,6}(·[\u4e00-\u9fa5]{1,6}){0,2}$/.test(t)||r(new Error("姓名的格式不正确")):r(new Error("请填写姓名")),r()},s=function(e,t,r){t?/^[\w.-]+@(?:[a-z0-9]+(?:-[a-z0-9]+)*\.)+[a-z]{2,3}$/.test(t)||r(new Error("邮箱的格式不正确")):r(),r()},o={name:"EditForm",props:{formData:Object},data:function(){return{form:{},rules:{nickname:[{validator:a,trigger:"blur"}],real_name:[{validator:n,trigger:"blur"}],email:[{validator:s,trigger:"blur"}]}}},watch:{formData:{handler:function(e){this.form=e||{account:"",nickname:"",real_name:"",email:""}},immediate:!0}},methods:{submit:function(){var e;return this.$refs.form.validate(function(t){return t?(e=!0,!0):(e=!1,!1)}),e}}},i=(r("83ca"),r("2877")),c=Object(i.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",staticClass:"edit",attrs:{"hide-required-asterisk":"",rules:e.rules,model:e.form}},[r("el-form-item",{attrs:{label:"登入账号",prop:"account",required:""}},[r("el-input",{attrs:{placeholder:"请填写登入账号"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),r("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[r("el-input",{attrs:{placeholder:"只能是中文、字母、数字"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),r("el-form-item",{attrs:{label:"真实姓名",prop:"real_name"}},[r("el-input",{model:{value:e.form.real_name,callback:function(t){e.$set(e.form,"real_name",t)},expression:"form.real_name"}})],1),r("el-form-item",{attrs:{label:"邮箱（选填）",prop:"email"}},[r("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)],1)},[],!1,null,"17dcd5f5",null);t.a=c.exports},"3eb0":function(e,t,r){},"452e":function(e,t,r){"use strict";r.r(t);r("a481"),r("96cf");var a=r("3b8d"),n=r("b0e1"),s=r("3bda"),o=r("bb2a"),i=r("518e"),c={name:"ProfileSetting",components:{EditAvatar:n.a,EditForm:s.a,EditPassword:o.a},data:function(){return{active:0,info:{},detail:{},password:"",lockPwd:""}},created:function(){this.getAdminDetail()},mounted:function(){},methods:{getAdminDetail:function(){var e=Object(a.a)(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.d)({admin_id:this.$store.getters["admin/adminId"]});case 2:t=e.sent,r=t.code,a=t.data.admin_detail,2e3===r&&(this.detail=a,this.info={_id:a._id,nickname:a.nickname,real_name:a.real_name,email:a.email});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),updatePassword:function(){var e=Object(a.a)(regeneratorRuntime.mark(function e(){var t,r,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.editPassword.submit()){e.next=10;break}return t=this.$refs.editPassword.form,r=t.oldPassword,a=t.password2,e.next=4,Object(i.n)({old_pwd:r,new_pwd:a});case 4:if(n=e.sent,2e3!==n.code){e.next=10;break}return e.next=9,this.$store.dispatch("admin/SignOut");case 9:this.$router.replace("/sign");case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),onUpdateAmin:function(){var e=Object(a.a)(regeneratorRuntime.mark(function e(){var t,r,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$refs.editForm.submit()){e.next=20;break}return t=Object.assign({admin_id:this.info._id,gender:this.$refs.editAvatar.selectedGender},this.$refs.editForm.form),e.prev=2,e.next=5,Object(i.l)(t);case 5:if(r=e.sent,a=r.code,n=r.msg,2e3!==a){e.next=14;break}return e.next=11,this.getAdminDetail();case 11:this.$vs.notify({title:"信息更新成功",text:n,color:"success"}),e.next=15;break;case 14:throw new Error(n);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),this.$vs.notify({title:"信息更新失败",text:e.t0,color:"danger"});case 20:case"end":return e.stop()}},e,this,[[2,17]])}));return function(){return e.apply(this,arguments)}}(),updateLockPassword:function(){var e=Object(a.a)(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.password.length>0&&this.lockPwd.length>0)){e.next=10;break}return e.next=3,Object(i.m)({password:this.password,lock_password:this.lockPwd});case 3:if(t=e.sent,r=t.code,a=t.msg,2e3!==r){e.next=10;break}return e.next=9,this.$store.dispatch("admin/getAdminInfo");case 9:this.$vs.notify({title:"更新成功",text:a,color:"success"});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},l=(r("990d"),r("2877")),d=Object(l.a)(c,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("vs-tabs",{attrs:{position:"left"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[r("vs-tab",{attrs:{label:"信息编辑",icon:"el-icon-user","icon-pack":"el-icon"}},[r("div",{staticClass:"pt-2 px-8 flex"},[r("div",{staticClass:"mr-16"},[r("EditAvatar",{ref:"editAvatar",attrs:{"admin-id":e.detail._id,avatar:e.detail.avatar_url,gender:e.detail.gender},on:{updateInfo:function(t){return e.getAdminDetail()}}})],1),r("div",{staticClass:"w-1/3 mb-4"},[r("EditForm",{ref:"editForm",attrs:{"form-data":e.info}}),r("vs-button",{attrs:{id:"btn"},on:{click:function(t){return e.onUpdateAmin()}}},[e._v("确认修改")])],1)])]),r("vs-tab",{attrs:{label:"修改密码",icon:"el-icon-lock","icon-pack":"el-icon"}},[r("div",{staticClass:"px-8 mb-4 w-1/2"},[r("EditPassword",{ref:"editPassword"}),r("vs-button",{attrs:{id:"btn"},on:{click:function(t){return e.updatePassword()}}},[e._v("确认修改密码")])],1)]),r("vs-tab",{attrs:{label:"锁屏密码",icon:"el-icon-monitor","icon-pack":"el-icon"}},[r("div",{staticClass:"w-2/3 ml-10 mb-4"},[r("vs-input",{staticClass:"mb-4",attrs:{type:"password",label:"登录密码",placeholder:"请填写您的登录密码"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateLockPassword()}},model:{value:e.password,callback:function(t){e.password="string"==typeof t?t.trim():t},expression:"password"}}),r("vs-input",{staticClass:"mb-4",attrs:{type:"password",label:"新的锁屏密码",placeholder:"按回车键提交"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateLockPassword()}},model:{value:e.lockPwd,callback:function(t){e.lockPwd="string"==typeof t?t.trim():t},expression:"lockPwd"}}),r("vs-button",{attrs:{id:"btn"},on:{click:function(t){return e.updateLockPassword()}}},[e._v("修改锁屏密码")])],1)])],1)],1)},[],!1,null,"4db5a216",null);t.default=d.exports},"83ca":function(e,t,r){"use strict";var a=r("fd60");r.n(a).a},"990d":function(e,t,r){"use strict";var a=r("3eb0");r.n(a).a},b0e1:function(e,t,r){"use strict";r("c5f6");var a=r("8bbf"),n=r.n(a).a.component("ReplaceAvatar",function(){return Promise.all([r.e("chunk-908ae0c2"),r.e("chunk-b84babcc")]).then(r.bind(null,"0a78"))}),s={male:"https://cdn.hrspider.top/default_avatar_male.jpg",female:"https://cdn.hrspider.top/default_avatar_female.jpg"},o={name:"EditAvatar",components:{ReplaceAvatar:n},props:{adminId:String,avatar:String,gender:Number},data:function(){return{defaultAvatar:s,selectedGender:0,avatarUrl:"https://cdn.hrspider.top/default_avatar_male.jpg",showAvatarPopup:!1}},watch:{selectedGender:{handler:function(e){var t=this.defaultAvatar,r=t.male,a=t.female;this.avatarUrl!==r&&this.avatarUrl!==a||(this.avatarUrl=e?a:r)},immediate:!0},avatar:{handler:function(e){(null==e?void 0:e.length)>0&&(this.avatarUrl=e)},immediate:!0},gender:{handler:function(e){e&&(this.selectedGender=e)},immediate:!0}}},i=r("2877"),c=Object(i.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("img",{staticClass:"heavy-shadow radius",attrs:{width:"150px",src:e.avatarUrl}}),r("div",{staticClass:"my-3  flex"},[r("div",{staticClass:"mr-3 px-3 py-1 primary rounded-lg cursor-pointer",staticStyle:{background:"rgba(var(--vs-primary), 0.1)"},on:{click:function(t){e.selectedGender=0}}},[e._v("\n      汉子\n      "),r("i",{directives:[{name:"show",rawName:"v-show",value:!e.selectedGender,expression:"!selectedGender"}],staticClass:"el-icon-check"})]),r("div",{staticClass:"px-3 py-1 danger rounded-lg cursor-pointer",staticStyle:{background:"rgba(var(--vs-danger), 0.1)"},on:{click:function(t){e.selectedGender=1}}},[e._v("\n      妹纸\n      "),r("i",{directives:[{name:"show",rawName:"v-show",value:e.selectedGender,expression:"selectedGender"}],staticClass:"el-icon-check"})])]),e.adminId?r("vs-button",{staticClass:"w-full max-w-xs",attrs:{size:"small",type:"border"},on:{click:function(t){e.showAvatarPopup=!0}}},[e._v("更换头像")]):e._e(),r("ReplaceAvatar",{ref:"replaceAvatar",attrs:{"admin-id":e.adminId,popupActive:e.showAvatarPopup},on:{updateInfo:function(t){return e.$emit("updateInfo")},closePopup:function(t){e.showAvatarPopup=!1}}})],1)},[],!1,null,null,null);t.a=c.exports},bb2a:function(e,t,r){"use strict";var a=function(e,t,r){t||r(new Error("请填写原始密码")),r()},n=function(e,t,r){t?/^[\w]{6,16}$/.test(t)||r(new Error("密码不符合规范")):r(new Error("请填写密码")),r()},s={name:"EditPassword",data:function(){var e=this;return{form:{oldPassword:"",password:"",password2:""},rules:{oldPassword:[{validator:a,trigger:"blur"}],password:[{validator:n,trigger:"blur"}],password2:[{validator:function(t,r,a){r?r!==e.form.password&&a(new Error("与前一次密码不一致")):a(new Error("请确认二次密码")),a()},trigger:"blur"}]}}},methods:{submit:function(){var e;return this.$refs.form.validate(function(t){return t?(e=!0,!0):(e=!1,!1)}),e}}},o=(r("ea7f"),r("2877")),i=Object(o.a)(s,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"form",staticClass:"edit",attrs:{"label-position":"top",rules:e.rules,model:e.form}},[r("el-form-item",{attrs:{label:"原始密码",prop:"oldPassword"}},[r("el-input",{attrs:{type:"password",placeholder:"请填写账号原始密码"},model:{value:e.form.oldPassword,callback:function(t){e.$set(e.form,"oldPassword",t)},expression:"form.oldPassword"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"6-16个字符，只能是字母、数字和下划线"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"password2"}},[r("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.form.password2,callback:function(t){e.$set(e.form,"password2",t)},expression:"form.password2"}})],1)],1)],1)},[],!1,null,"9c93887c",null);t.a=i.exports},ea7f:function(e,t,r){"use strict";var a=r("2e72");r.n(a).a},fd60:function(e,t,r){}}]);